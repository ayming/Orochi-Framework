//licensed under the MIT license: http://orochis-den.com/license
Orochi.include(_.Class({className:"com.orochis-den.orochi-ext.accelerometer",body:new function(){var a=Orochi.prototype;a.accelerometer={getAcceleration:function(b){var c=init_args(b,{});var e=init_args(c.onSuccess,function(){});var d=init_args(c.onError,function(){});var f={data:{accelerometerHandler:"getAcceleration"},onSuccess:function(g,j,h){if(isset(g.accelerometerHandler)){if(isset(g.accelerometerHandler.acceleration)){a.log("orochi.accelerometer","getAcceleration onSuccess()");var i=g.accelerometerHandler.acceleration;e({x:i[0],y:i[1],z:i[2]});return}}f.onError(h,j,null,g)},onError:function(h,j,i,g){a.log("orochi.accelerometer","getAcceleration onError()");d()}};a.nativeRequest(f)},listen:function(b){var d=init_args(b,{});var c=init_args(d.interval,1000);var f=true;var h=init_args(d.onSuccess,function(){});var g=init_args(d.onError,function(){});var e=function(j,i){a.accelerometer.getAcceleration({onSuccess:function(k){j(k);if(f){setTimeout(function(){e(j,i)},c)}},onError:function(){i()}})};setTimeout(function(){e(h,g)},c);return{clear:function(){f=false}}}}}}));Orochi.include(_.Class({className:"com.orochis-den.orochi-ext.compass",body:new function(){var a=Orochi.prototype;a.compass={getHeading:function(b){var c=init_args(b,{});var e=init_args(c.onSuccess,function(){});var d=init_args(c.onError,function(){});var f={data:{compassHandler:"getHeading"},onSuccess:function(g,j,h){if(isset(g.compassHandler)){if(isset(g.compassHandler.heading)){a.log("orochi.compass","getHeading onSuccess()");var i=g.compassHandler.heading;e(i);return}}f.onError(h,j,null,g)},onError:function(h,j,i,g){a.log("orochi.compass","getHeading onError()");d()}};a.nativeRequest(f)},listen:function(b){var d=init_args(b,{});var c=init_args(d.interval,1000);var f=true;var h=init_args(d.onSuccess,function(){});var g=init_args(d.onError,function(){});var e=function(j,i){a.compass.getHeading({onSuccess:function(k){j(k);if(f){setTimeout(function(){e(j,i)},c)}},onError:function(){i()}})};setTimeout(function(){e(h,g)},c);return{clear:function(){f=false}}}}}}));Orochi.include(_.Class({className:"com.orochis-den.orochi-ext.media",body:new function(){var b=Orochi.prototype;var a=function(c){var e=init_args(c.onSuccess,function(g){});var d=init_args(c.onError,function(){});var f={data:{mediaHandler:c.method,mediaType:c.mediaType},onSuccess:function(g,i,h){if(isset(g.mediaHandler)){if(g.mediaHandler.mediaPath!=""){e(g.mediaHandler.mediaPath);return}}f.onError(h,i,null,g)},onError:function(h,j,i,g){d()}};b.nativeRequest(f)};b.media={get:function(d){var e=init_args(d,{});var c=init_args(e.mediaType,"image");a({method:"get",mediaType:c,onSuccess:e.onSuccess,onError:e.onError})},capture:function(d){var e=init_args(d,{});var c=init_args(e.mediaType,"image");a({method:"capture",mediaType:c,onSuccess:e.onSuccess,onError:e.onError})}}}}));Orochi.include(_.Class({className:"com.orochis-den.orochi-ext.network",body:new function(){var a=Orochi.prototype;a.network={getConnType:function(b){var c=init_args(b,{});var e=init_args(c.onSuccess,function(){});var d=init_args(c.onError,function(){});var f={data:{networkHandler:"getConnType"},onSuccess:function(g,i,h){if(isset(g.networkHandler)){if(isset(g.networkHandler.connType)){a.log("orochi.network","getConnType onSuccess()");e(g.networkHandler.connType);return}}f.onError(h,i,null,g)},onError:function(h,j,i,g){a.log("orochi.network","getConnType onError()");d()}};a.nativeRequest(f)}}}}));Orochi.include(_.Class({className:"com.orochis-den.orochi-ext.notification",body:new function(){var a=Orochi.prototype;a.notification={alert:function(e){var k=init_args(e,{});var b=init_args(k.isConfirmAlert,false);var l=init_args(k.title,b?"Confirm Alert":"Alert");var c=init_args(k.msg,"");var d=init_args(k.okBtnLabel,"OK");var h=init_args(k.cancelBtnLabel,"Cancel");var m=d+","+h;var j=init_args(k.onSuccess,function(n){});var f=init_args(k.onError,function(){});if(!a.isInWebView){var i=0;if(b){if(!confirm(c)){i=1}}else{alert(c)}j(i);return}var g={data:{notificationHandler:"alert",alertTitle:l,alertMsg:c,alertBtnLabels:m,isConfirmAlert:b},onSuccess:function(n,p,o){if(isset(n.notificationHandler)){if(n.notificationHandler.alertDone==true){a.log("orochi.notification","alert onSuccess()");j(n.notificationHandler.buttonPressed);return}}g.onError(o,p,null,n)},onError:function(o,q,p,n){a.log("orochi.notification","alert onError()");f()}};a.nativeRequest(g)},beep:function(b){var c=init_args(b,{});var e=init_args(c.beepTimes,1);var f=init_args(c.onSuccess,function(){});var d=init_args(c.onError,function(){});var g={data:{notificationHandler:"beep",beepTimes:e},onSuccess:function(h,j,i){if(isset(h.notificationHandler)){if(h.notificationHandler.beepDone==true){a.log("orochi.notification","beep onSuccess()");f();return}}g.onError(i,j,null,h)},onError:function(i,k,j,h){a.log("orochi.notification","beep onError()");d()}};a.nativeRequest(g)},vibrate:function(c){var d=init_args(c,{});var b=init_args(d.vibrateLength,500);var f=init_args(d.onSuccess,function(){});var e=init_args(d.onError,function(){});var g={data:{notificationHandler:"vibrate",vibrateLength:b},onSuccess:function(h,j,i){if(isset(h.notificationHandler)){if(h.notificationHandler.vibrateDone==true){a.log("orochi.notification","vibrate onSuccess()");f();return}}g.onError(i,j,null,h)},onError:function(i,k,j,h){a.log("orochi.notification","vibrate onError()");e()}};a.nativeRequest(g)}}}}));